
/*
	Group No:09
	Group Members: Anuj Budha Magar, Amrit Thapa, Pratima Dahal, Swastika Adhikari
	Script: Create Script
	Module : csy2038 - Database 2
	Module Tutor: Sangita Satyal
	Path: @F:\DatabaseYEAR2\assignment\create_09.txt
*/

SET SERVEROUTPUT ON;
SET LINESIZE 180 

--CREATING THE OBJECT TYPE TO CREATE NESTED TABLE
CREATE OR REPLACE TYPE address_type AS OBJECT(
	country 	VARCHAR2(25),
	city 		VARCHAR2(50),
	street 		VARCHAR2(255));
/

--CHECKING IF THE OBJECT TYPE HAS BEEN CREATED WITHOUT ERRORS
SHOW ERRORS

--TESTING IF OBJECT_TABLE CREATED
DESC USER_OBJECTS
SELECT OBJECT_NAME, OBJECT_TYPE FROM USER_OBJECTS WHERE OBJECT_TYPE LIKE 'TABLE';

--CREATING THE OBJECT TYPE TO CREATE SIMPLE TABLE TYPE
CREATE OR REPLACE TYPE social_media_type AS OBJECT(
	social_media_name 		VARCHAR2(50),
	social_media_username 	VARCHAR2(50),
	contact 				VARCHAR2(15));
/

--CHECKING IF THE OBJECT TYPE HAS BEEN CREATED WITHOUT ERRORS
SHOW ERRORS

--TESTING IF OBJECT_TABLE CREATED
DESC USER_OBJECTS
SELECT OBJECT_NAME, OBJECT_TYPE FROM USER_OBJECTS WHERE OBJECT_TYPE LIKE 'TABLE';


--CREATING THE OBJECT TYPE TO CREATE VARRAY 
CREATE OR REPLACE TYPE contact_type AS OBJECT(
	email 	VARCHAR2(50),
	phone 	VARCHAR2(15),
	mobile 	VARCHAR2(15));
/

--CHECKING IF THE OBJECT TYPE HAS BEEN CREATED WITHOUT ERRORS
SHOW ERRORS

--TESTING IF OBJECT_TTYPE CREATED
DESC USER_OBJECTS
SELECT OBJECT_NAME, OBJECT_TYPE FROM USER_OBJECTS WHERE OBJECT_TYPE LIKE 'TYPE';


--CREATING OBJECT TABLE NAMED ADDRESSES BASED ON OBJECT_TYPE address_type
 CREATE TABLE addresses OF address_type(
 city DEFAULT 'KATHMANDU',
 country DEFAULT 'NEPAL');
 
 --TESTING FOR ADDRESSES
 SELECT OBJECT_NAME, OBJECT_TYPE FROM USER_OBJECTS WHERE OBJECT_TYPE LIKE 'TABLE';

 --CREATING A VARRAY WITH 50 ELEMENTS
 CREATE TYPE contact_varray_type AS VARRAY(50) OF contact_type;
/

--CHECKING IF THE OBJECT TYPE HAS BEEN CREATED WITHOUT ERRORS
SHOW ERRORS

--CREATING OBJECT TABLE TYPE NAMED social_media_table_type 
CREATE TYPE social_media_table_type AS TABLE OF social_media_type;
/

--CHECKING IF THE OBJECT TYPE HAS BEEN CREATED WITHOUT ERRORS
SHOW ERRORS

--TESTING IF OBJECT_TABLE CREATED
SELECT OBJECT_NAME, OBJECT_TYPE FROM USER_OBJECTS WHERE OBJECT_TYPE L

--DESCRIBING the social_media_table_type
DESC social_media_table_type;

 --CREATING TABLE locations
 CREATE TABLE locations(
 location_id  NUMBER(11),
 location_address address_type);
 
 --SHOWING THE STRUCTURE OF LOCATIONS
DESC locations;

--CHECKING THE DATA FROM LOCATIONS
SELECT * FROM locations;
 
 --CREATING TABLE festival_nature
 CREATE TABLE festival_nature(
 festival_nature_id NUMBER(11),
 festival_type VARCHAR2(50)); 
 
--SHOWING THE STRUCTURE OF FESTIVAL_NATURE
DESC festival_nature

--CHECKING THE DATA FROM FESTIVAL_NATURE
SELECT * FROM festival_nature;

--CREATING TABLE festivals
 CREATE TABLE festivals(
 festival_nature_id NUMBER(11),
 location_id  NUMBER(11),
 festival_name VARCHAR2(50),
 occuring_date DATE);
 
 --SHOWING THE STRUCTURE OF FESTIVALS
 DESC festivals;
 
--CHECKING THE DATA FROM FESTIVALS
SELECT * FROM festivals;
 
 --CREATING TABLE staff
 CREATE TABLE staff(
 staff_id NUMBER(11),
 staff_title VARCHAR2(5) DEFAULT 'MRS',
 staff_firstname VARCHAR2(30),
 staff_surname VARCHAR2(30),
 staff_contact  contact_varray_type,
 staff_address REF address_type SCOPE IS addresses,
 social_media_used social_media_table_type)
 NESTED TABLE social_media_used STORE AS social_media_table;
 
 --SHOWING THE STRUCTURE OF STAFF
 DESC staff;
 
 --CHECKING THE DATA FROM STAFF
 SELECT * FROM staff;
 
 --CREATING TABLE festival_staff
 CREATE TABLE festival_staff(
staff_id  NUMBER(11) NOT NULL,
location_id NUMBER(11) NOT NULL,
festival_nature_id NUMBER(11) NOT NULL);
 
 --SHOWING THE STRUCTURE OF FESTIVAL_STAFF
 DESC festival_staff;
 
 --CHECKING THE DATA FROM FESTIVAL_STAFF
 SELECT * FROM festival_staff;
 
--CREATING SEQUENCE seq_locations
CREATE SEQUENCE seq_locations
INCREMENT BY 1
START WITH 5000
NOCYCLE;

--CREATING SEQUENCE seq_festival_nature
CREATE SEQUENCE seq_festival_nature
INCREMENT BY 1
START WITH 50001
NOCYCLE;

--CREATING SEQUENCE seq_staff
CREATE SEQUENCE seq_staff
INCREMENT BY 2
START WITH 1000
MAXVALUE 10000000000;



  
 
 
 